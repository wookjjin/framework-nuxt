---
title: Life Cycle Hook
description: Vue의 생명주기 훅에 대해 이해하고, 각 상황에 맞게 적절한 훅을 활용하는 방법을 학습합니다.
navigation:
  icon: i-lucide-refresh-cw
---

## Overview
웹 애플리케이션 개발을 진행하다 보면, 차트 라이브러리나 외부 UI 컴포넌트와 같은 복잡한 도구를 사용할 때, 데이터가 완전히 준비되지 않은 상태에서 렌더링이 먼저 실행되는 문제를 자주 마주할 수 있습니다. 

예를 들어, 서버에서 데이터를 비동기적으로 받아 차트를 구성하는 경우, 데이터가 아직 도착하지 않은 상황에서 차트 컴포넌트가 먼저 렌더링되는 바람에 오류가 발생하거나 빈 화면이 렌더링되는 등의 문제가 생길 수 있습니다.

이러한 상황에서는 단순히 v-if 또는 v-show와 같은 조건부 렌더링만으로 해결하기 어려운 경우가 있습니다. 특히 차트나 에디터 등 초기화 과정이 중요한 복잡한 라이브러리의 경우, 데이터와 DOM이 모두 제대로 준비된 시점을 기준으로 초기화 코드를 실행해야만 정상적인 동작을 보장할 수 있습니다.

이럴 때 Vue의 **생명 주기 훅**을 적절히 활용하면,

- 데이터가 준비된 후에만 초기화를 실행하거나,
- DOM이 완전히 렌더링된 뒤에만 특정 로직을 수행하게 하여,

이런 타이밍 문제를 효과적으로 제어할 수 있습니다.

## Life Cycle Diagram

![Vue Life Cycle Diagram](https://v3-docs.vuejs-korea.org/assets/lifecycle.d3fe54ca.png)
출처: [Vue.js](https://ko.vuejs.org/)


## Main Life Cycle Hook
### 1. `setup()`
Options API에서 `beforeCreate`와 `created` 훅이 수행했던 **스크립트 초기화** 단계를 하나로 통합하여 처리하는 역할입니다.

```vue
<script setup>
console.log('🧭 setup 실행됨')
</script>
```
- `setup()`은 컴포넌트가 인스턴스화되기 전에 가장 먼저 실행됩니다.
- props, emit, ref, reactive, computed 등 Composition API 기능을 여기서 모두 선언 가능

::tip
`setup()`은 컴포넌트의 “스크립트 초기화 단계”로 이해하면 됩니다
::

### 2. `onBeforeMount()`
`onBeforeMount()` 훅은 DOM이 마운트되기 직전 단계에서 실행되며, 이 시점에는 실제 DOM 조작이 아직 불가능합니다. 따라서 직접적으로 DOM과 관련된 작업은 이 훅에서 수행하지 않는 것이 중요합니다. 대신, 이 시기를 활용해 템플릿을 설정하거나 컴포넌트의 초기 상태를 준비하는 등 내부 로직을 정리하는 데 적합합니다. 이를 통해 컴포넌트가 원활하게 동작할 수 있는 기반을 마련할 수 있습니다.
```vue
<script setup>
onBeforeMount(() => {
  console.log('🏗 onBeforeMount - DOM 마운트 전')
})
</script>
```
### 3. `onMounted()`
`onMounted()` 훅은 DOM이 완전히 생성되어 브라우저에 렌더링된 후 실행됩니다. 컴포넌트가 DOM에 마운트된 이후 특정 작업을 실행해야 할 때 사용됩니다. 예를 들어, API 호출을 통해 데이터를 가져오거나, 초기화 작업을 수행하거나, DOM 요소와의 상호작용을 설정하는 등의 작업에 적합합니다.
```vue
<script setup>
import { onMounted } from 'vue'

onMounted(() => {
  console.log('✅ mounted - DOM 마운트 완료')
})
</script>
```
### 4. `onBeforeUpdate()`
`onBeforeUpdate()` 훅은 **컴포넌트의 반응형 상태가 변경되어 DOM이 업데이트되기 직전**에 호출됩니다.  
이 시점에서는 DOM이 **변경되기 전의 상태**를 확인할 수 있으므로, 업데이트 직전에 필요한 준비 작업이나 정리 작업을 수행하는 데 적합합니다.

예를 들어, 스크롤 위치를 저장하거나 특정 DOM 상태를 업데이트 이전에 기록해야 하는 경우에 활용할 수 있습니다.

```vue
<script setup>
import { ref, onBeforeUpdate } from 'vue'

const count = ref(0)

onBeforeUpdate(() => {
  console.log('🔄 onBeforeUpdate - DOM 업데이트 직전')
})
</script>

<template>
  <div>
    <p>{{ count }}</p>
    <button @click="count++">증가</button>
  </div>
</template>
```
onBeforeUpdate()는 DOM 상태가 변경되기 전을 관찰하거나, 업데이트 이전에 필요한 작업을 준비하는 로직을 작성하기에 적합한 시점입니다.
### 5. `onUpdated()`
onUpdated() 훅은 실제 DOM이 다시 렌더링된 후 실행됩니다. 이는 반응형 데이터가 변경된 다음, 가상 DOM이 패치되고 최종적으로 실제 DOM에 변경사항이 반영된 후 호출되는 과정을 의미합니다.

이 시점에서는 새롭게 렌더링된 DOM 상태를 안정적으로 참조할 수 있으므로, DOM에 기반한 외부 라이브러리를 활용하거나 후처리 작업을 수행하기에 적합한 단계라고 할 수 있습니다.

**즉, 반응형 데이터 변경 → 가상 DOM 패치 → 실제 DOM 반영 완료 후**

```vue
<script setup>
import { ref, onUpdated } from 'vue'

const count = ref(0)

onUpdated(() => {
  console.log('🔁 onUpdated - DOM 업데이트 완료')
})
</script>

<template>
  <div>
    <p>{{ count }}</p>
    <button @click="count++">증가</button>
  </div>
</template>
```
::tip
`onUpdated()`는 DOM을 수정하거나 UI를 처리하는 데 활용되지만, 이 내부에서 상태를 다시 변경하게 되면 무한 루프에 빠질 위험이 있으므로 신중히 사용해야 합니다.
::

### 6. `onBeforeUnmount()`
`onBeforeUnmount()` 훅은 컴포넌트가 화면에서 제거되기 직전에 호출되는 생명주기 메서드입니다. 이 단계는 컴포넌트가 더 이상 필요하지 않을 때 정리 작업을 수행하기에 가장 적합한 시점으로, 주로 타이머 제거, 이벤트 리스너 해제, 구독 취소 등의 작업에 사용됩니다.

만약 컴포넌트가 언마운트되기 전에 반드시 처리해야 할 중요한 로직이 있다면, 이를 `onBeforeUnmount()`에 넣어 두는 것이 효과적입니다. 이를 통해 애플리케이션의 안정성과 효율성을 유지하면서 불필요한 메모리 사용을 방지할 수 있습니다.

```vue
<script setup>
import { onBeforeUnmount } from 'vue'

onBeforeUnmount(() => {
  console.log('🧹 onBeforeUnmount - 컴포넌트 제거 직전')
})
</script>
```
onBeforeUnmount()는 컴포넌트가 제거되기 전에 정리(clean-up) 작업을 수행할 수 있는 중요한 시점입니다. 특히 외부 이벤트나 전역 객체(window, document)에 등록된 리스너를 반드시 제거해야 한다는 점을 유념하세요.
### 7. `onUnmounted()`
`onUnmounted()` 훅은 컴포넌트가 완전히 제거된 뒤 실행되는 기능입니다. 이 단계에서는 더 이상 DOM에 접근할 수 없지만, 비동기 작업이나 전역 상태 관리를 포함한 마지막 정리 작업을 처리할 기회를 제공합니다. 이를 통해 컴포넌트 라이프사이클의 끝맺음을 안정적으로 관리할 수 있습니다.

```vue
<script setup>
import { onUnmounted } from 'vue'

onUnmounted(() => {
  console.log('🏁 onUnmounted - 컴포넌트 제거 완료')
})
</script>
```
`onUnmounted()`는 컴포넌트의 수명 주기의 마지막 단계로,
- 전역 상태 해제
- 비동기 작업 취소
- 콘솔 로그, 메모리 누수 방지 등의 후처리를 하기 좋은 타이밍입니다.

## Life Cycle Hook 정리
Vue 3 Composition API에서는 컴포넌트의 상태 초기화부터 DOM 업데이트 및 언마운트 과정까지를 세밀하게 제어할 수 있는 생명 주기 훅을 제공합니다. 아래 표는 각각의 훅이 실행되는 시점과 주요 용도를 간결하게 정리한 내용입니다.

| 단계 | 훅 이름 | 실행 시점 | 주요 용도 | DOM 접근 가능 여부 |
|------|---------|------------|-----------|---------------------|
| 초기화 | `setup()` | 컴포넌트 인스턴스 생성 직후 | 스크립트 초기화, 상태 선언, props 접근, composable 호출 | ❌ 아직 불가능 |
| 마운트 전 | `onBeforeMount()` | 템플릿이 DOM에 마운트되기 직전 | 초기 상태 준비, 렌더링 전 내부 로직 정리 | ❌ 불가능 |
| 마운트 후 | `onMounted()` | DOM이 생성되고 브라우저에 렌더링 완료 후 | API 호출, 외부 라이브러리 초기화, DOM 조작 | ⭕ 가능 |
| 업데이트 전 | `onBeforeUpdate()` | 반응형 상태 변경 → DOM 업데이트 직전 | 업데이트 전 상태 저장, 정리 작업 | ⭕ 가능 (변경 전 상태) |
| 업데이트 후 | `onUpdated()` | DOM이 실제로 다시 렌더링된 직후 | UI 후처리, DOM 기반 작업 | ⭕ 가능 (변경 후 상태) |
| 언마운트 전 | `onBeforeUnmount()` | 컴포넌트가 제거되기 직전 | 이벤트 리스너 제거, 타이머 정리, 구독 해제 등 | ⭕ 가능 |
| 언마운트 후 | `onUnmounted()` | 컴포넌트가 완전히 제거된 직후 | 메모리 해제, 비동기 작업 취소, 전역 상태 정리 | ❌ 이미 제거됨 |

::tip
이 표를 참고하면 **데이터 초기화**, **DOM 접근**, 그리고 **정리(clean-up)** 작업의 적절한 시점을 보다 명확하게 이해할 수 있습니다
::